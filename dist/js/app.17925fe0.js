(function(e){function t(t){for(var a,o,c=t[0],i=t[1],l=t[2],u=0,p=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=i;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"098a":function(e,t,n){},"0c8a":function(e,t,n){"use strict";var a=n("512a"),r=n.n(a);r.a},1:function(e,t){},1557:function(e,t,n){},"1bcd":function(e,t,n){"use strict";var a=n("2830"),r=n.n(a);r.a},"1e58":function(e,t,n){},2830:function(e,t,n){},"28e7":function(e,t,n){},3388:function(e,t,n){"use strict";var a=n("8a6c"),r=n.n(a);r.a},"408e":function(e,t,n){"use strict";var a=n("41a1"),r=n.n(a);r.a},"41a1":function(e,t,n){},"512a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{attrs:{activeProjectName:e.activeProject.name,serverURI:e.serverURI,connected:e.connected,drawerOpen:e.drawerOpen},on:{closeProject:e.closeProject,deleteProject:e.deleteProject}}),n("div",{staticClass:"container"},[n("WindowDrawer",{attrs:{"drawer-open":e.drawerOpen&&e.projectOpen,stages:e.stages}}),n("section",{ref:"workspace",staticClass:"workspace",class:e.workspaceIsLocked?"locked":""},[e.projectOpen&&e.connected&&(e.windows.length>0||e.stages.length>0)?n("div",{ref:"grid",staticClass:"grid"},[e._l(e.stages,(function(t,a){return n("StageWindow",{key:"s"+a,staticClass:"draggable",attrs:{stage:t,clients:e.getClientsConnectedToStage(t),files:e.files},on:{sendStageEvent:e.sendStageEvent}})})),e._l(e.windows,(function(t,a){return["Stage"===t.type?n("StageWindow",{key:a,staticClass:"draggable",attrs:{window:t,stage:e.stage,clients:e.getClientsConnectedToStage(e.stage),files:e.files},on:{sendStageEvent:e.sendStageEvent}}):e._e(),"Control"===t.type?n("ControlWindow",{key:a,attrs:{window:t},on:{start:function(t){return e.sendStageEvent("*","start","timestamp")}},model:{value:e.events,callback:function(t){e.events=t},expression:"events"}}):e._e(),"Client"===t.type?n("ClientWindow",{key:a,attrs:{window:t,clients:e.clients}}):e._e(),"Stages"===t.type?n("StagesWindow",{key:a,attrs:{window:t,stages:e.stages}}):e._e(),"File"===t.type?n("FileWindow",{key:a,attrs:{window:t,files:e.files}}):e._e(),"StagePreview"===t.type?n("StagePreviewWindow",{key:a,attrs:{window:t,serverURI:e.serverURI}}):e._e()]}))],2):n("div",{staticClass:"center full-size grid"},[e.projectOpen&&e.connected?n("div",{staticClass:"text-centered"},[n("h1",[n("i",{staticClass:"material-icons md-48"},[e._v("widgets")])]),n("p",{staticStyle:{"max-width":"400px"}},[e._v("This is your workspace. Press "),n("span",[e._v("D")]),e._v(" to toggle the "),n("i",[e._v("Window Drawer")]),e._v(", and drag a window to the workspace to get started.")])]):n("SetupWindow",{attrs:{connected:e.connected,projects:e.projects},on:{openProject:e.openProject,createProject:e.createProject},model:{value:e.serverURI,callback:function(t){e.serverURI=t},expression:"serverURI"}})],1),n("div",{staticClass:"workspace-info"},[n("button",{staticClass:"icon",attrs:{"data-help":"(Un)lock your workspace from moving & resizing windows (L)"},on:{click:function(t){e.workspaceIsLocked=!e.workspaceIsLocked}}},[e._v(e._s(e.workspaceIsLocked?"lock_open":"lock"))])])])],1)],1)},s=[],o=(n("4de4"),n("c975"),n("b0c0"),n("5014")),c=n.n(o),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Draggable",[n("header",[e._v("Stages")]),e.opened?n("div",{staticClass:"content"},[n("div",[n("div",{staticClass:"button-group"},[n("button",{attrs:{"data-help":"Add a stage to your installation"},on:{click:e.addStage}},[n("i",{staticClass:"material-icons"},[e._v("add")])]),n("button",{attrs:{"data-help":"Delete the currently selected stage"},on:{click:e.deleteStage}},[n("i",{staticClass:"material-icons"},[e._v("delete")])])]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedStage,expression:"selectedStage"}],attrs:{name:"stages",size:"5"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedStage=t.target.multiple?n:n[0]}}},e._l(e.stages,(function(t,a){return n("option",{key:a,domProps:{value:a}},[e._v("#"+e._s(t.id))])})),0)]),e.stages[e.selectedStage]?n("div",[n("StageWindow",{staticClass:"draggable",attrs:{stage:e.stages[e.selectedStage]}})],1):e._e()]):e._e()])},l=[],d=(n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"draggable",staticClass:"window"},[e._t("default")],2)}),u=[],p={name:"Draggable",data:function(){return{screenX:0,screenY:0,screenWidth:100,screenHeight:100}},mounted:function(){var e=this,t=this.$refs.draggable;c()(t).draggable({allowFrom:"header",modifiers:[c.a.modifiers.snap({targets:[c.a.createSnapGrid({x:20,y:20})],range:1/0,relativePoints:[{x:0,y:0}]}),c.a.modifiers.restrict({restriction:t.parentNode,elementRect:{top:0,left:0,bottom:1,right:1},endOnly:!0})],inertia:!1,autoScroll:!1}).resizable({edges:{left:!1,right:!0,bottom:!0,top:!1},modifiers:[c.a.modifiers.snap({targets:[c.a.createSnapGrid({x:20,y:20})],range:1/0,relativePoints:[{x:0,y:0}]})]}).on("dragmove",(function(t){e.screenX+=t.dx,e.screenY+=t.dy,t.target.style.top=e.screenY+"px",t.target.style.left=e.screenX+"px"})).on("resizemove",(function(t){e.screenWidth=t.rect.width,e.screenHeight=t.rect.height,t.target.style.width=t.rect.width+"px",t.target.style.height=t.rect.height+"px"}))}},f=p,v=(n("9ad7"),n("2877")),g=Object(v["a"])(f,d,u,!1,null,"1fdbae20",null),m=g.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Draggable",[n("header",{on:{click:function(t){e.opened=!e.opened}}},[e._v("Stage #"+e._s(e.stage.id)+" ("+e._s(e.clientsReady)+"/"+e._s(e.clients.length)+") "),n("StatusLED",{attrs:{connected:e.clientsReady>0,"data-help":"This light turns green when at least 1 connected client is ready for perfomance"}})],1),e.opened?n("div",{staticClass:"content"},[n("span",[e._v("Media:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.stage.media,expression:"stage.media"}],attrs:{name:"files"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.stage,"media",t.target.multiple?n:n[0])}}},e._l(e.files,(function(t,a){return n("option",{key:a},[e._v(e._s(t.name))])})),0),n("button",{attrs:{"data-help":"Send the 'start' event to Stage #"+e.stage.id},on:{click:function(t){return e.$emit("sendStageEvent",e.stage.id,"start","timestamp")}}},[e._v("start")])]):e._e()])},w=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"statusLED",class:{active:e.connected}})},_=[],k={name:"StatusLED",props:{connected:Boolean}},y=k,j=(n("3388"),Object(v["a"])(y,b,_,!1,null,"08d4a257",null)),S=j.exports,P={name:"StageWindow",data:function(){return{opened:!1}},props:{stage:Object,files:Array,clients:Array},computed:{clientsReady:function(){return this.clients.filter((function(e){return e.data.loaded})).length}},components:{Draggable:m,StatusLED:S}},x=P,C=(n("5b92"),Object(v["a"])(x,h,w,!1,null,"568bdde6",null)),O=C.exports,$={name:"stageWindow",data:function(){return{opened:!0,selectedStage:0}},props:{stages:Array},components:{Draggable:m,StageWindow:O},methods:{addStage:function(){this.stages.push({id:this.stages.length+1,media:""})},deleteStage:function(){this.stages.splice(this.selectedStage,1)}}},D=$,E=(n("5709"),Object(v["a"])(D,i,l,!1,null,"01cd89d0",null)),F=E.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Draggable",[n("header",[e._v("Stage Preview "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.URL,expression:"URL"}],attrs:{type:"text"},domProps:{value:e.URL},on:{input:function(t){t.target.composing||(e.URL=t.target.value)}}})]),n("iframe",{attrs:{src:e.serverURI+e.URL,allowfullscreen:"",scrolling:"no"}})])},W=[],I={name:"StagePreviewWindow",data:function(){return{URL:"/stage?id=1"}},props:{serverURI:String},components:{Draggable:m}},U=I,R=(n("8035"),Object(v["a"])(U,N,W,!1,null,"84c77270",null)),L=R.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Draggable",{class:e.editMode?"editing":""},[n("header",[e._v("Stage Events "),e.events.length>0?n("button",{staticClass:"icon",attrs:{"data-help":"Toggle between edit & launch mode"},on:{click:function(t){e.editMode=!e.editMode}}},[e._v(" "+e._s(e.editMode?"done":"create")+" ")]):e._e()]),e.opened?n("div",{staticClass:"content"},[e._l(e.events,(function(t,a){return n("div",{key:a},[e.editMode?n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"event.label"}],attrs:{type:"text"},domProps:{value:t.label},on:{input:function(n){n.target.composing||e.$set(t,"label",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"event.code"}],staticClass:"b-0",attrs:{type:"text"},domProps:{value:t.code},on:{input:function(n){n.target.composing||e.$set(t,"code",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"event.to"}],attrs:{type:"text"},domProps:{value:t.to},on:{input:function(n){n.target.composing||e.$set(t,"to",n.target.value)}}})]):n("button",{on:{click:function(n){return e.$emit("stageEvent",t.to,t.code)}}},[e._v(" "+e._s(t.label)+" ")])])})),e.editMode&&e.events.length>0?n("div",[n("button",{on:{click:function(t){return e.events.push({label:"",to:"",code:""})}}},[e._v("+")])]):e._e(),e.events.length<1?n("div",{staticClass:"center text-centered"},[n("div",[n("i",{staticClass:"material-icons md-48"},[e._v("router")]),n("p",[e._v("No Stage Events yet")]),n("button",{on:{click:function(t){e.editMode=!0,e.events.push({label:"Start all stages",to:"*",code:"start"})}}},[e._v("Add a Stage Event")])])]):e._e()],2):e._e()])},A=[],M={name:"ControlWindow",data:function(){return{opened:!0,editMode:!1,events:[]}},props:{client:Object},components:{Draggable:m},mounted:function(){console.log("yoiniy")}},q=M,B=(n("1bcd"),Object(v["a"])(q,T,A,!1,null,"10a17c5f",null)),z=B.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Draggable",[n("header",[e._v("Files")]),e.opened?n("div",{staticClass:"content"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFile,expression:"selectedFile"}],attrs:{name:"files",size:"4"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedFile=t.target.multiple?n:n[0]}}},e._l(e.files,(function(t,a){return n("option",{key:a,domProps:{value:a}},[e._v(e._s(t.name))])})),0),e._v(" "+e._s(e.files[e.selectedFile])+" ")]):e._e()])},Y=[],H={name:"FileWindow",data:function(){return{opened:!0,selectedFile:0}},props:{files:Array},components:{Draggable:m},mounted:function(){}},G=H,J=(n("ea26"),Object(v["a"])(G,X,Y,!1,null,"9148f78a",null)),K=J.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Draggable",[n("header",[e._v("Connected Clients")]),e.opened?n("div",{staticClass:"content"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedClient,expression:"selectedClient"}],attrs:{name:"clients",size:"5"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedClient=t.target.multiple?n:n[0]}}},e._l(e.clients,(function(t,a){return n("option",{key:a,domProps:{value:a}},[e._v(e._s(t.id))])})),0),e.clients[e.selectedClient]?n("div",[n("b",[e._v("size:")]),e._v(" "+e._s(e.clients[e.selectedClient].data.width)+"x"+e._s(e.clients[e.selectedClient].data.width)+", "+e._s(e.clients[e.selectedClient].data.isFullScreen?"Fullscreen":"Not fullscreen")),n("br"),n("b",[e._v(e._s(e.clients[e.selectedClient].data.media)+":")]),e._v(" "+e._s(e.clients[e.selectedClient].data.loaded?"not loaded":"loaded")),n("br")]):e._e()]):e._e()])},V=[],Z={name:"ClientWindow",data:function(){return{opened:!0,selectedClient:0}},props:{clients:Array},components:{Draggable:m}},ee=Z,te=(n("408e"),Object(v["a"])(ee,Q,V,!1,null,"417f2411",null)),ne=te.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Draggable",[n("header",[e._v("Welcome")]),e.opened?n("div",{staticClass:"content text-centered center"},[e.connected?n("div",{staticStyle:{width:"300px"}},[n("p",[e._v("There is no project running on this server yet. Open one:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedProject,expression:"selectedProject"}],attrs:{name:"projects",size:"3"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedProject=t.target.multiple?n:n[0]}}},e._l(e.projects,(function(t,a){return n("option",{key:a,domProps:{value:t}},[e._v(e._s(t))])})),0),n("button",{attrs:{disabled:!e.selectedProject},on:{click:function(t){return e.$emit("openProject",e.selectedProject)}}},[e._v("Open "+e._s(e.projects[e.selectedProject]))]),n("hr"),n("p",[e._v("Or, create a new project:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newProjectName,expression:"newProjectName"}],attrs:{type:"text",placeholder:"Project name"},domProps:{value:e.newProjectName},on:{input:function(t){t.target.composing||(e.newProjectName=t.target.value)}}}),n("button",{attrs:{disabled:e.createButtonDisabled},on:{click:function(t){return e.$emit("createProject",e.newProjectName)}}},[e._v("Create empty project")])]):n("div",{staticClass:"welcome"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 80 80"}},[n("defs",[n("radialGradient",{attrs:{cx:"56.15%",cy:"27.43%",fx:"56.15%",fy:"27.43%",r:"57.526%",gradientTransform:"matrix(.5626 -.82673 .8022 .54591 .026 .589)",id:"ball-3-a"}},[n("stop",{attrs:{"stop-color":"#F8F7FF",offset:"0%"}}),n("stop",{attrs:{"stop-color":"#DAD8FF",offset:"34.827%"}}),n("stop",{attrs:{"stop-color":"#9B95F3",offset:"100%"}})],1),n("filter",{attrs:{x:"-500%",y:"-500%",width:"1000%",height:"1000%",filterUnits:"objectBoundingBox",id:"dropshadow-ball-3"}},[n("feOffset",{attrs:{dx:"24",dy:"24",in:"SourceAlpha",result:"shadowOffsetOuter"}}),n("feGaussianBlur",{attrs:{stdDeviation:"24",in:"shadowOffsetOuter",result:"shadowBlurOuter"}}),n("feColorMatrix",{attrs:{values:"0 0 0 0 0.10 0 0 0 0 0.17 0 0 0 0 0.21 0 0 0 0.22 0",in:"shadowBlurOuter"}})],1)],1),n("circle",{staticStyle:{filter:"url(#dropshadow-ball-3)"},attrs:{cx:"40",cy:"40",r:"40",fill:"#FFF","fill-rule":"evenodd"}}),n("circle",{attrs:{cx:"40",cy:"40",r:"40",fill:"url(#ball-3-a)","fill-rule":"evenodd"}})]),n("h1",[e._v("solv.us "),n("b",[e._v("ui")])]),n("p",[e._v("Please connect to an active solv.us server.")]),n("b",[e._v("Server URI")]),e._v(" "),n("br"),n("input",{attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),n("br"),n("br")])]):e._e()])},re=[],se=(n("caad"),n("2532"),{name:"SetupWindow",data:function(){return{opened:!0,selectedProject:"",newProjectName:""}},props:["value","connected","projects"],components:{Draggable:m},computed:{createButtonDisabled:function(){return this.newProjectName.length<1||this.projects.includes(this.newProjectName+".sproject")}}}),oe=se,ce=(n("0c8a"),Object(v["a"])(oe,ae,re,!1,null,"59a0ea0c",null)),ie=ce.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{staticClass:"window-drawer",class:e.drawerOpen?"open":""},[n("button",{on:{click:e.addStage}},[e._v("Add a stage")]),n("hr"),n("p",[e._v("Drag a window to the workspace to instantiate it")]),n("button",{staticClass:"drag-drop",attrs:{"data-type":"Control"}},[e._v("Controls")]),n("button",{staticClass:"drag-drop",attrs:{"data-type":"Client","data-help":"List of connected clients"}},[e._v("Clients")]),n("button",{staticClass:"drag-drop",attrs:{"data-type":"Stages","data-help":"The Stage Manager"}},[e._v("Stages")]),n("button",{staticClass:"drag-drop",attrs:{"data-type":"StagePreview","data-help":"A preview of the stage"}},[e._v("Stage Preview")]),n("button",{staticClass:"drag-drop",attrs:{"data-type":"File","data-help":"A File Browser"}},[e._v("File")])])},de=[],ue={name:"WindowDrawer",data:function(){return{screenX:0,screenY:0}},mounted:function(){var e=this;this.$nextTick((function(){c()(".drag-drop").draggable({inertia:!1,autoScroll:!1}).on("dragmove",(function(t){e.screenX+=t.dx,e.screenY+=t.dy,t.target.style.webkitTransform=t.target.style.transform="translate("+e.screenX+"px, "+e.screenY+"px)"})).on("dragend",(function(t){t.target.style.transform="",e.screenX=0,e.screenY=0}))}))},props:["drawer-open","stages"],methods:{addStage:function(){this.stages.push({id:this.stages.length+1,media:""})},deleteStage:function(){this.stages.splice(this.selectedStage,1)}}},pe=ue,fe=(n("d04f"),Object(v["a"])(pe,le,de,!1,null,"49891aa6",null)),ve=fe.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",[n("span",{staticClass:"logo"},[n("button",{staticClass:"icon",attrs:{"data-help":"Click toggle Window Drawer (D)"},on:{click:function(t){e.drawerOpen,e.drawerOpen}}},[e._v(e._s(e.drawerOpen?"keyboard_arrow_left":"keyboard_arrow_right"))]),n("button",{staticClass:"icon",attrs:{"data-help":"Click to toggle Full-Screen"},on:{click:e.requestFullScreen}},[e._v(e._s(e.isFullScreen?"fullscreen_exit":"fullscreen"))]),e._v(" solvus "),n("b",[e._v("ui")])]),e.activeProjectName?n("span",{staticClass:"project-name",on:{click:function(t){e.settingsOpened=!e.settingsOpened}}},[n("i",{staticClass:"material-icons"},[e._v(e._s(e.settingsOpened?"keyboard_arrow_up":"keyboard_arrow_down"))]),e._v(" "+e._s(e.activeProjectName)+".sproject ")]):e._e(),n("span",{staticClass:"end"},[n("StatusLED",{attrs:{connected:e.connected}})],1)]),n("div",{staticClass:"settings",class:e.settingsOpened?"opened ":""},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.activeProjectName,expression:"activeProjectName"}],attrs:{type:"text"},domProps:{value:e.activeProjectName},on:{input:function(t){t.target.composing||(e.activeProjectName=t.target.value)}}}),n("input",{attrs:{type:"text",value:"/Daan/Solvus/Projects","date-help":"the media path"}}),n("button",{on:{click:function(t){e.settingsOpened=!1,e.$emit("closeProject")}}},[e._v("Close project")]),n("hr"),n("button",{staticClass:"danger",on:{click:function(t){e.settingsOpened=!1,e.$emit("deleteProject")}}},[e._v("Delete project")])])])])},me=[],he=(n("99af"),{name:"Header",data:function(){return{settingsOpened:!1,isFullScreen:!1}},props:{serverURI:String,connected:Boolean,activeProjectName:String,drawerOpen:Boolean},components:{StatusLED:S},methods:{requestFullScreen:function(){var e=document.querySelector("body");document.fullscreenElement?(document.exitFullscreen(),this.isFullScreen=!1):e.requestFullscreen().then(this.isFullScreen=!0).catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}}}),we=he,be=(n("b11a"),Object(v["a"])(we,ge,me,!1,null,"4db043d7",null)),_e=be.exports,ke=n("8055"),ye=n.n(ke),je={name:"App",components:{StagesWindow:F,StageWindow:O,StagePreviewWindow:L,ControlWindow:z,FileWindow:K,ClientWindow:ne,SetupWindow:ie,Header:_e,WindowDrawer:ve},data:function(){return{stages:[],files:[],clients:[],projects:[],activeProject:{},serverURI:"",connected:!1,projectOpen:!1,drawerOpen:!1,workspaceIsLocked:!0}},mounted:function(){var e=this,t=window.localStorage.getItem("serverURI");this.serverURI=t||window.location.host,this.$socket=ye.a.connect(this.serverURI+"/ui"),this.socketListeners(),c()(this.$refs.workspace).dropzone({accept:".drag-drop",overlap:.75,ondrop:function(t){e.drawerOpen=!1;var n=t.relatedTarget.getAttribute("data-type");e.addWindow(n,t.dragEvent.client.x,t.dragEvent.client.y)}}),window.addEventListener("keydown",this.handleKeyEvent,!0)},methods:{handleKeyEvent:function(e){var t=["input","textarea"];if(-1===t.indexOf(e.target.tagName.toLowerCase()))switch(e.key){case"d":this.drawerOpen=!this.drawerOpen;break;case"l":this.workspaceIsLocked=!this.workspaceIsLocked;break}},addWindow:function(e,t,n){this.windows.push({type:e,position:{x:t,y:n}})},sendStageEvent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.$socket.emit("stageEvent",e,t,n)},openProject:function(e){this.$socket.emit("openProject",e)},closeProject:function(){this.$socket.emit("closeProject")},deleteProject:function(){var e=prompt(" This action cannot be undone. This will permanently delete the '"+this.activeProject.name+"' project\n\n Please type '"+this.activeProject.name+"' to confirm:");if(e===this.activeProject.name)this.$socket.emit("deleteProject");else{if(null===e)return;this.deleteProject()}},createProject:function(e){this.$socket.emit("createProject",e)},socketListeners:function(){var e=this;this.$socket.on("projects",(function(t){e.projects=t})),this.$socket.on("projectUpdate",(function(t){t?(e.activeProject=t,e.stages=t.stages,e.windows=t.windows,console.log(t),e.projectOpen||(e.projectOpen=!0)):(e.activeProject={},e.stages=[],e.projectOpen=!1,e.drawerOpen=!1,e.windows=[],e.stages=[],e.files=[])})),this.$socket.on("clientsUpdate",(function(t){e.clients=t})),this.$socket.on("filesUpdate",(function(t){e.files=t})),this.$socket.on("connect",(function(){e.connected=!0})),this.$socket.on("disconnect",(function(){e.connected=!1}))},getClientsConnectedToStage:function(e){return this.clients.filter((function(t){return t.data.stageId==e.id}))}},watch:{stages:{handler:function(e){this.$socket.emit("updateStages",e)},deep:!0},windows:{handler:function(e){this.$socket.emit("updateWindows",e)},deep:!0},serverURI:function(){window.localStorage.setItem("serverURI",this.serverURI),this.$socket.close(),this.$socket=ye.a.connect(this.serverURI+"/ui"),this.socketListeners()}}},Se=je,Pe=(n("5c0b"),Object(v["a"])(Se,r,s,!1,null,null,null)),xe=Pe.exports,Ce=n("2f62"),Oe=(n("7db0"),n("a9e3"),{name:"Untitled Project",author:"",bpm:120,timeSignature:[4,4],PPQ:0}),$e={setProjectName:function(e,t){e.name=t},setProjectAuthor:function(e,t){e.author=t},setProjectBpm:function(e,t){e.bpm=t},setProjectPpq:function(e,t){e.PPQ=t},setProjectTimeSignature:function(e,t){e.timeSignature=t}},De={},Ee={state:Oe,mutations:$e,actions:De},Fe={startTime:Number,duration:Number,colors:["#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c","#3498db","#2ecc71","#9b59b6","#e67e22","#f1c40f","#e74c3c"],tracks:[]},Ne={addTrack:function(e,t){var n=e.tracks[e.tracks.length-1]?e.tracks[e.tracks.length-1].id:-1,a=n+1,r=e.colors[a];t={id:a,name:"Track "+a,color:r,sequences:[]},e.tracks.push(t)},deleteTrack:function(e,t){e.tracks.splice(e.tracks.indexOf(t),1)},setTrackName:function(e,t){var n=t.trackId,a=t.name;e.tracks.find((function(e){return e.id===n})).name=a},addSequence:function(e,t){var n,a=t.trackId,r=t.sequence;n=e.tracks[a].sequences.length>0?e.tracks[a].sequences[e.tracks[a].sequences.length-1].id:-1;var s=n+1;r.id=s,e.tracks.find((function(e){return e.id===a})).sequences.push(r)},deleteSequence:function(e,t){var n=t.trackId,a=t.sequence;e.tracks[n].sequences.splice(e.tracks[n].sequences.indexOf(a),1)},loadProject:function(e,t){console.log(t),e.header=t.header,e.tracks=t.tracks}},We={addTestData:function(e){for(var t=e.commit,n=0;n<30;n++){t("addTrack");for(var a=0;a<50;a++)t("addSequence",{trackId:n,sequence:{time:Math.floor(100+a*(100*Math.random()+450)),duration:Math.floor(200+300*Math.random())}})}}},Ie={state:Fe,mutations:Ne,actions:We,modules:{header:Ee}};a["a"].use(Ce["a"]);var Ue=new Ce["a"].Store({state:{},mutations:{},actions:{},modules:{project:Ie}});n("b107");a["a"].config.productionTip=!1,a["a"].prototype.$socket,new a["a"]({store:Ue,render:function(e){return e(xe)}}).$mount("#app")},5709:function(e,t,n){"use strict";var a=n("661e"),r=n.n(a);r.a},"5b92":function(e,t,n){"use strict";var a=n("5d8d"),r=n.n(a);r.a},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"5d8d":function(e,t,n){},"661e":function(e,t,n){},8035:function(e,t,n){"use strict";var a=n("1e58"),r=n.n(a);r.a},"8a6c":function(e,t,n){},"8d4a":function(e,t,n){},"9ad7":function(e,t,n){"use strict";var a=n("098a"),r=n.n(a);r.a},"9c0c":function(e,t,n){},b107:function(e,t,n){},b11a:function(e,t,n){"use strict";var a=n("28e7"),r=n.n(a);r.a},d04f:function(e,t,n){"use strict";var a=n("8d4a"),r=n.n(a);r.a},ea26:function(e,t,n){"use strict";var a=n("1557"),r=n.n(a);r.a}});
//# sourceMappingURL=app.17925fe0.js.map